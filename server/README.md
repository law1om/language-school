# Сервер для языковой школы

API сервер для веб-приложения языковой школы. Обеспечивает авторизацию пользователей, управление курсами и запись на обучение.

## Технологии

- Node.js с Express
- PostgreSQL в качестве базы данных
- Prisma ORM для взаимодействия с БД
- JWT для аутентификации

## Установка и настройка

### Предварительные требования

- Node.js (версия 14 или выше)
- PostgreSQL 16
- NPM или Yarn

### Настройка базы данных PostgreSQL

1. Убедитесь, что PostgreSQL запущен на порту 5432
2. Создайте базу данных:

```sql
CREATE DATABASE "language-school";
```

### Установка зависимостей

```bash
npm install
```

### Настройка .env файла

Создайте файл `.env` в корне проекта со следующим содержимым:

```
DATABASE_URL="postgresql://postgres:19189@localhost:5432/language-school"
JWT_SECRET="language-school-secret-key-123456789"
PORT=3001
```

### Настройка и миграция базы данных

```bash
# Генерация клиента Prisma
npm run prisma:generate

# Создание и применение миграций
npm run prisma:migrate
```

## Запуск сервера

### Режим разработки

```bash
npm run dev
```

### Режим продакшн

```bash
npm start
```

## API Endpoints

### Аутентификация

- **POST /api/auth/register** - Регистрация нового пользователя
- **POST /api/auth/login** - Вход пользователя

### Курсы

- **GET /api/courses** - Получение списка всех курсов
- **POST /api/courses** - Создание нового курса (требуется роль ADMIN или TEACHER)

### Запись на курсы

- **POST /api/enrollments** - Запись на курс
- **GET /api/user/enrollments** - Получение списка курсов, на которые записан пользователь

## Роли пользователей

- **STUDENT** - Базовая роль, может записываться на курсы
- **TEACHER** - Может создавать и вести курсы
- **ADMIN** - Имеет все права, включая управление пользователями и курсами 